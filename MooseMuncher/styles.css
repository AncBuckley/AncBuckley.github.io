/* =======================================================================
   styles.css â€” Themeable styles for Moose Muncher
   - Color variables & sizes are overridden by prefs.js
   - Font scaling via --font-scale (applied in several spots)
   ======================================================================= */

:root{
  /* Palette (override via prefs.js) */
  --bg:#0b1020;
  --panel:#121a33;
  --muted:#8ea0d0;
  --accent:#6de2ff;
  --accent2:#9cff6d;
  --danger:#ff6d8a;
  --warning:#ffd166;
  --good:#77ffb4;

  /* Tiles */
  --tile:#141e3f;
  --tile2:#1b2753;
  --tile-eaten:#0c1430;
  --tile-eaten2:#0a1126;
  --tile-stroke: rgba(255,255,255,.12);
  --tile-stroke-eaten: rgba(255,255,255,.06);
  --tile-text: rgba(230,240,255,.96);

  /* Progress (used for sidebar bar in canvas rendering) */
  --progress-empty:#0a1437;
  --progress-border:#20306b;
  --progress-start:#46d4ff;
  --progress-end:#9cff6d;

  /* Effects */
  --correct-halo:#9cff6d;

  /* Troggle palette list (comma-separated) */
  --troggle-colors:#ff3b6b,#ffb800,#00e5ff,#7cff00,#ff00e5,#ff7a00,#00ffb3,#ffd700,#00ffd0,#ff4d00;

  /* Typography knobs */
  --font-family: system-ui, -apple-system, "Segoe UI", Roboto, Inter, Arial, sans-serif;
  --font-ui: 16px;        /* base UI size */
  --font-scale: 1;        /* global scale multiplier (prefs.js sets this) */

  /* Shape & shadow */
  --radius: 18px;
  --shadow: 0 10px 30px rgba(0,0,0,.4);
}

*{ box-sizing:border-box }
html,body{ height:100% }

body{
  margin:0;
  background: radial-gradient(1200px 800px at 20% -10%, #142048 0%, var(--bg) 45%, #070a16 100%);
  color:#e8eeff;
  font-size: calc(var(--font-ui) * var(--font-scale));
  line-height: 1.35;
  font-family: var(--font-family);
  display:flex; align-items:center; justify-content:center;
  overflow:hidden;
}

#root{ width:min(1150px, 100%); padding:16px }

/* ====================== HUD ====================== */
.hud{
  display:flex; align-items:center; gap:12px; justify-content:space-between; flex-wrap:wrap;
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0));
  border:1px solid rgba(255,255,255,.08);
  border-radius: var(--radius);
  padding:12px 16px;
  box-shadow: var(--shadow);
}
.hud-left{ display:flex; align-items:center; gap:12px; flex-wrap:wrap }

.lives-popup {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -60%);
    font-size: 3.5rem;
    color: #ff6d8a;
    background: rgba(20,24,40,0.85);
    border-radius: 18px;
    padding: 0.5em 1.2em;
    z-index: 100;
    pointer-events: none;
    font-weight: bold;
    text-shadow: 0 2px 12px #000, 0 0 2px #fff;
    transition: opacity 0.2s;
}

    .lives-popup.hide {
        opacity: 0;
        pointer-events: none;
    }

    .lives-popup:not(.hide) {
        opacity: 1;
    }

.title{ font-weight:800; letter-spacing:.4px; color:#f3f6ff; text-shadow:0 2px 12px rgba(109,226,255,.25) }

.badge{
  padding:6px 10px; border-radius:12px;
  background: rgba(255,255,255,.06); color:#cfe0ff;
  border:1px solid rgba(255,255,255,.1)
}
.badge strong{ color:#ffffff; font-weight:800 }

.stat{
  display:flex; align-items:center; gap:8px;
  padding:6px 10px;
  border-radius:12px; background:#0e1531; border:1px solid #232c59;
}

/* Buttons */
.btn{
  padding:8px 14px; border-radius:12px;
  background: linear-gradient(180deg, #1a244f, #121a33);
  border:1px solid #293773; color:#dce7ff;
  cursor:pointer; box-shadow: var(--shadow);
  transition: filter .15s ease, transform .05s ease;
}
.btn:hover{ filter: brightness(1.08) }
.btn:active{ transform: translateY(1px) }
.btn:focus-visible{ outline:2px solid var(--accent); outline-offset:2px }

/* ====================== Canvas & Frame ====================== */
.wrap{ position:relative; margin-top:12px; display:grid; grid-template-columns: 1fr; gap:12px }
canvas{
  width:100%; height:76vh;
  background: radial-gradient(1600px 800px at 50% -10%, var(--tile2), #0f1733 45%, var(--bg));
  border-radius: var(--radius);
  border:1px solid rgba(255,255,255,.08);
  box-shadow: var(--shadow);
  display:block;
  user-select:none;
}

/* ====================== Overlays ====================== */
.overlay{ position:absolute; inset:10px; display:flex; align-items:center; justify-content:center; pointer-events:none }
.card{
  width:min(680px, 92%);
  background: linear-gradient(180deg, var(--panel), #0c1229);
  border:1px solid #2a376f;
  border-radius: 20px;
  box-shadow: var(--shadow);
  padding:22px;
  pointer-events:auto;
}
.card h1{ margin:0 0 8px; font-size: calc(28px * var(--font-scale)) }
.card p{ color:#c6d6ff }
.row{ display:flex; gap:12px; align-items:center; flex-wrap:wrap }
.row > *{ flex: 1 1 auto }

/* Selects & labels */
.select{
  appearance:none; padding:10px 12px; border-radius:12px;
  border:1px solid #31407e; background:#0b1537; color:#e7f0ff;
  min-width: 180px;
}
.select:focus-visible{ outline:2px solid var(--accent); outline-offset:2px }
.label{ opacity:.75; font-size: calc(12px * var(--font-scale)) }

/* Help list */
.help-list{ display:grid; grid-template-columns: 1fr 1fr; gap:8px 18px; margin:10px 0 16px }
.help-list div{ background:#0d1532; border:1px solid #213067; padding:10px 12px; border-radius:12px }

/* KBD tags */
.kbd{
  font-weight:700; padding:2px 8px; border-radius:8px;
  background:#172251; border:1px solid #2b3a7b; color:#cfe2ff
}

/* Footer help */
.footer-help{ opacity:.75; font-size: calc(12px * var(--font-scale)); margin-top:10px }

/* Utility */
.hide{ display:none !important }

/* Toast */
.toast{
  position:absolute; right:18px; bottom:18px;
  background:#0c132b; border:1px solid #273267;
  border-radius:12px; padding:10px 12px; color:#cfe2ff;
  box-shadow: var(--shadow);
}

/* ====================== Responsive ====================== */
@media (max-height: 720px){
  canvas{ height:58vh }
  .card{ width:min(740px, 96%) }
}

@media (max-width: 720px){
  #root{ padding:10px }
  .help-list{ grid-template-columns: 1fr }
  .select{ min-width: 140px }
}

/* ====================== Focus & Selection ====================== */
::selection{ background: rgba(109,226,255,.28) }
:focus-visible{ outline: 2px solid var(--accent); outline-offset:2px }

/* Light theme hook (optional) */
.theme-light{
  --bg:#f6f8ff;
  --panel:#ffffff;
  --muted:#4a557a;
  --tile:#e9eeff;
  --tile2:#dde6ff;
  --tile-eaten:#eef2ff;
  --tile-eaten2:#e7ecff;
  --tile-text:#0b1020;
  background: radial-gradient(1200px 800px at 20% -10%, #eef3ff 0%, #e8edff 45%, #e3e9ff 100%);
}
.theme-light canvas{
  background: radial-gradient(1600px 800px at 50% -10%, var(--tile2), #eef3ff 45%, #e8edff);
  border-color:#d7defa;
}
.theme-light .hud{
  background: linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,0));
  border-color:#d7defa;
}
.theme-light .badge{ background:#eef2ff; border-color:#d7defa; color:#33406b }
.theme-light .stat{ background:#eef2ff; border-color:#d7defa; color:#2c375e }
.theme-light .btn{ background: linear-gradient(180deg, #ecf2ff, #e7edff); border-color:#cfd9ff; color:#2b3763 }
.theme-light .card{ background: linear-gradient(180deg, #ffffff, #f5f7ff); border-color:#d7defa }
.theme-light .help-list div{ background:#f3f6ff; border-color:#dbe3ff }
.theme-light .toast{ background:#ffffff; border-color:#d7defa; color:#2b3763 }
